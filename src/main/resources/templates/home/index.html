<!doctype html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=width.advice, initial-scale=1.0">
    <title>Projeto mapa</title>
    <meta name="autor" content="Gui">
    <style>
        #map{
            height: 400px;
            width: 740px;
        }
    </style>
</head>
<body>
<div id = "map"></div>

<script th:inline="javascript">

    var streetNumber = [[${numero}]];
    var street = [[${rua}]];
    var neighborhood = [[${bairro}]];
    var city = "Garanhuns";
    var state = "Pernambuco";
    var country = "Brazil";

    function initMap() {
        var geocoder = new google.maps.Geocoder();
        var address = streetNumber + ' ' + street + ', ' + neighborhood + ', ' + city + ', ' + state + ', ' + country;

        geocoder.geocode({ 'address': address }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var latitude = results[0].geometry.location.lat();
                var longitude = results[0].geometry.location.lng();

                var map = new google.maps.Map(document.getElementById("map"), { center: { lat: latitude, lng: longitude }, zoom: 17 });

                var marker = new google.maps.Marker({
                    position: { lat: latitude, lng: longitude },
                    map: map,
                    title: 'Localização'
                });
            } else {
                console.error('Geocoding failed. Status: ' + status);
            }
        });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDAhefUroNgMWN6d8pKFFFLPrrNM9aaMSc&callback=initMap" async defer></script>
</body>
</html>